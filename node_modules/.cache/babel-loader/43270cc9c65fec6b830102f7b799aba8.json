{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar Lib = require('../../lib');\n\nvar Registry = require('../../registry');\n\nvar attributes = require('./attributes');\n\nvar colorscaleDefaults = require('../../components/colorscale/defaults');\n\nfunction supplyDefaults(traceIn, traceOut, defaultColor, layout) {\n  function coerce(attr, dflt) {\n    return Lib.coerce(traceIn, traceOut, attributes, attr, dflt);\n  }\n\n  supplyIsoDefaults(traceIn, traceOut, defaultColor, layout, coerce);\n}\n\nfunction supplyIsoDefaults(traceIn, traceOut, defaultColor, layout, coerce) {\n  var isomin = coerce('isomin');\n  var isomax = coerce('isomax');\n\n  if (isomax !== undefined && isomax !== null && isomin !== undefined && isomin !== null && isomin > isomax) {\n    // applying default values in this case:\n    traceOut.isomin = null;\n    traceOut.isomax = null;\n  }\n\n  var x = coerce('x');\n  var y = coerce('y');\n  var z = coerce('z');\n  var value = coerce('value');\n\n  if (!x || !x.length || !y || !y.length || !z || !z.length || !value || !value.length) {\n    traceOut.visible = false;\n    return;\n  }\n\n  var handleCalendarDefaults = Registry.getComponentMethod('calendars', 'handleTraceDefaults');\n  handleCalendarDefaults(traceIn, traceOut, ['x', 'y', 'z'], layout);\n  ['x', 'y', 'z'].forEach(function (dim) {\n    var capDim = 'caps.' + dim;\n    var showCap = coerce(capDim + '.show');\n\n    if (showCap) {\n      coerce(capDim + '.fill');\n    }\n\n    var sliceDim = 'slices.' + dim;\n    var showSlice = coerce(sliceDim + '.show');\n\n    if (showSlice) {\n      coerce(sliceDim + '.fill');\n      coerce(sliceDim + '.locations');\n    }\n  });\n  var showSpaceframe = coerce('spaceframe.show');\n\n  if (showSpaceframe) {\n    coerce('spaceframe.fill');\n  }\n\n  var showSurface = coerce('surface.show');\n\n  if (showSurface) {\n    coerce('surface.count');\n    coerce('surface.fill');\n    coerce('surface.pattern');\n  }\n\n  var showContour = coerce('contour.show');\n\n  if (showContour) {\n    coerce('contour.color');\n    coerce('contour.width');\n  } // Coerce remaining properties\n\n\n  ['text', 'hovertext', 'hovertemplate', 'lighting.ambient', 'lighting.diffuse', 'lighting.specular', 'lighting.roughness', 'lighting.fresnel', 'lighting.vertexnormalsepsilon', 'lighting.facenormalsepsilon', 'lightposition.x', 'lightposition.y', 'lightposition.z', 'flatshading', 'opacity'].forEach(function (x) {\n    coerce(x);\n  });\n  colorscaleDefaults(traceIn, traceOut, layout, coerce, {\n    prefix: '',\n    cLetter: 'c'\n  }); // disable 1D transforms (for now)\n\n  traceOut._length = null;\n}\n\nmodule.exports = {\n  supplyDefaults: supplyDefaults,\n  supplyIsoDefaults: supplyIsoDefaults\n};","map":null,"metadata":{},"sourceType":"script"}