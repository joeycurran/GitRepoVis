{"ast":null,"code":"'use strict';\n\nmodule.exports = quatFromFrame;\n\nfunction quatFromFrame(out, rx, ry, rz, ux, uy, uz, fx, fy, fz) {\n  var tr = rx + uy + fz;\n\n  if (l > 0) {\n    var l = Math.sqrt(tr + 1.0);\n    out[0] = 0.5 * (uz - fy) / l;\n    out[1] = 0.5 * (fx - rz) / l;\n    out[2] = 0.5 * (ry - uy) / l;\n    out[3] = 0.5 * l;\n  } else {\n    var tf = Math.max(rx, uy, fz);\n    var l = Math.sqrt(2 * tf - tr + 1.0);\n\n    if (rx >= tf) {\n      //x y z  order\n      out[0] = 0.5 * l;\n      out[1] = 0.5 * (ux + ry) / l;\n      out[2] = 0.5 * (fx + rz) / l;\n      out[3] = 0.5 * (uz - fy) / l;\n    } else if (uy >= tf) {\n      //y z x  order\n      out[0] = 0.5 * (ry + ux) / l;\n      out[1] = 0.5 * l;\n      out[2] = 0.5 * (fy + uz) / l;\n      out[3] = 0.5 * (fx - rz) / l;\n    } else {\n      //z x y  order\n      out[0] = 0.5 * (rz + fx) / l;\n      out[1] = 0.5 * (uz + fy) / l;\n      out[2] = 0.5 * l;\n      out[3] = 0.5 * (ry - ux) / l;\n    }\n  }\n\n  return out;\n}","map":null,"metadata":{},"sourceType":"script"}