{"ast":null,"code":"'use strict';\n\nmodule.exports = barycentric;\n\nvar solve = require('robust-linear-solve');\n\nfunction reduce(x) {\n  var r = 0;\n\n  for (var i = 0; i < x.length; ++i) {\n    r += x[i];\n  }\n\n  return r;\n}\n\nfunction barycentric(simplex, point) {\n  var d = point.length;\n  var A = new Array(d + 1);\n\n  for (var i = 0; i < d; ++i) {\n    var row = new Array(d + 1);\n\n    for (var j = 0; j <= d; ++j) {\n      row[j] = simplex[j][i];\n    }\n\n    A[i] = row;\n  }\n\n  A[d] = new Array(d + 1);\n\n  for (var i = 0; i <= d; ++i) {\n    A[d][i] = 1;\n  }\n\n  var b = new Array(d + 1);\n\n  for (var i = 0; i < d; ++i) {\n    b[i] = point[i];\n  }\n\n  b[d] = 1.0;\n  var x = solve(A, b);\n  var w = reduce(x[d + 1]);\n\n  if (w === 0) {\n    w = 1.0;\n  }\n\n  var y = new Array(d + 1);\n\n  for (var i = 0; i <= d; ++i) {\n    y[i] = reduce(x[i]) / w;\n  }\n\n  return y;\n}","map":null,"metadata":{},"sourceType":"script"}