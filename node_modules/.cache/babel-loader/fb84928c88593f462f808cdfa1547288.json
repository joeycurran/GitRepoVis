{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar scatterHover = require('../scatter/hover');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar Lib = require('../../lib');\n\nfunction hoverPoints(pointData, xval, yval, hovermode) {\n  var scatterPointData = scatterHover(pointData, xval, yval, hovermode);\n  if (!scatterPointData || scatterPointData[0].index === false) return;\n  var newPointData = scatterPointData[0]; // hovering on fill case\n\n  if (newPointData.index === undefined) {\n    return scatterPointData;\n  }\n\n  var subplot = pointData.subplot;\n  var cdi = newPointData.cd[newPointData.index];\n  var trace = newPointData.trace;\n  if (!subplot.isPtInside(cdi)) return;\n  newPointData.xLabelVal = undefined;\n  newPointData.yLabelVal = undefined;\n  makeHoverPointText(cdi, trace, subplot, newPointData);\n  newPointData.hovertemplate = trace.hovertemplate;\n  return scatterPointData;\n}\n\nfunction makeHoverPointText(cdi, trace, subplot, pointData) {\n  var radialAxis = subplot.radialAxis;\n  var angularAxis = subplot.angularAxis;\n  radialAxis._hovertitle = 'r';\n  angularAxis._hovertitle = 'θ';\n  var rVal = radialAxis.c2l(cdi.r);\n  pointData.rLabel = Axes.tickText(radialAxis, rVal, 'hover').text; // N.B here the ° sign is part of the formatted value for thetaunit:'degrees'\n\n  var thetaVal = angularAxis.thetaunit === 'degrees' ? Lib.rad2deg(cdi.theta) : cdi.theta;\n  pointData.thetaLabel = Axes.tickText(angularAxis, thetaVal, 'hover').text;\n  var hoverinfo = cdi.hi || trace.hoverinfo;\n  var text = [];\n\n  function textPart(ax, val) {\n    text.push(ax._hovertitle + ': ' + val);\n  }\n\n  if (!trace.hovertemplate) {\n    var parts = hoverinfo.split('+');\n    if (parts.indexOf('all') !== -1) parts = ['r', 'theta', 'text'];\n    if (parts.indexOf('r') !== -1) textPart(radialAxis, pointData.rLabel);\n    if (parts.indexOf('theta') !== -1) textPart(angularAxis, pointData.thetaLabel);\n\n    if (parts.indexOf('text') !== -1 && pointData.text) {\n      text.push(pointData.text);\n      delete pointData.text;\n    }\n\n    pointData.extraText = text.join('<br>');\n  }\n}\n\nmodule.exports = {\n  hoverPoints: hoverPoints,\n  makeHoverPointText: makeHoverPointText\n};","map":null,"metadata":{},"sourceType":"script"}