{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict';\n\nvar extractOpts = require('../../components/colorscale').extractOpts;\n\nvar makeColorMap = require('./make_color_map');\n\nvar endPlus = require('./end_plus');\n\nfunction calc(gd, trace, opts) {\n  var contours = trace.contours;\n  var line = trace.line;\n  var cs = contours.size || 1;\n  var coloring = contours.coloring;\n  var colorMap = makeColorMap(trace, {\n    isColorbar: true\n  });\n\n  if (coloring === 'heatmap') {\n    var cOpts = extractOpts(trace);\n    opts._fillgradient = trace.colorscale;\n    opts._zrange = [cOpts.min, cOpts.max];\n  } else if (coloring === 'fill') {\n    opts._fillcolor = colorMap;\n  }\n\n  opts._line = {\n    color: coloring === 'lines' ? colorMap : line.color,\n    width: contours.showlines !== false ? line.width : 0,\n    dash: line.dash\n  };\n  opts._levels = {\n    start: contours.start,\n    end: endPlus(contours),\n    size: cs\n  };\n}\n\nmodule.exports = {\n  min: 'zmin',\n  max: 'zmax',\n  calc: calc\n};","map":null,"metadata":{},"sourceType":"script"}