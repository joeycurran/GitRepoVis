{"ast":null,"code":"/**\n* Copyright 2012-2019, Plotly, Inc.\n* All rights reserved.\n*\n* This source code is licensed under the MIT license found in the\n* LICENSE file in the root directory of this source tree.\n*/\n'use strict'; // var Lib = require('../../lib');\n\nfunction calc(gd, trace) {\n  var cd = [];\n  var lastReading = trace.value;\n  if (!(typeof trace._lastValue === 'number')) trace._lastValue = trace.value;\n  var secondLastReading = trace._lastValue;\n  var deltaRef = secondLastReading;\n\n  if (trace._hasDelta && typeof trace.delta.reference === 'number') {\n    deltaRef = trace.delta.reference;\n  }\n\n  cd[0] = {\n    y: lastReading,\n    lastY: secondLastReading,\n    delta: lastReading - deltaRef,\n    relativeDelta: (lastReading - deltaRef) / deltaRef\n  };\n  return cd;\n}\n\nmodule.exports = {\n  calc: calc\n};","map":null,"metadata":{},"sourceType":"script"}